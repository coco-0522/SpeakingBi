<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å­¦éœ¸æ•™è‚² - è‹±æ–‡ä¼šè¯ç³»ç»Ÿ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 15px;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            -webkit-text-size-adjust: 100%;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        h2 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        h3 {
            color: #3498db;
            margin-top: 20px;
            font-size: 1.2rem;
        }
        select, button {
            padding: 14px 20px;
            margin: 10px 0;
            font-size: 16px;
            border-radius: 8px;
            border: 1px solid #ddd;
            width: 100%;
            box-sizing: border-box;
            -webkit-appearance: none;
        }
        button {
            background-color: #007AFF;
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
            min-height: 54px;
            font-size: 17px;
        }
        button:hover {
            background-color: #0066CC;
        }
        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        #output, #topic, #score, #feedback, #result {
            margin: 15px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
            min-height: 20px;
            text-align: left;
            word-break: break-word;
            font-size: 16px;
        }
        #topic {
            font-weight: bold;
            color: #e74c3c;
        }
        #score {
            font-weight: bold;
            color: #27ae60;
        }
        #status {
            color: #FF3B30;
            font-weight: bold;
            margin: 10px 0;
            min-height: 20px;
            font-size: 15px;
        }
        .recording {
            background-color: #FF3B30;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        #error {
            color: #e74c3c;
            margin: 10px 0;
            min-height: 20px;
            font-size: 15px;
        }
        #tips {
            margin-top: 25px;
            padding: 15px;
            background-color: #e8f4fc;
            border-left: 4px solid #3498db;
            border-radius: 0 8px 8px 0;
            font-size: 15px;
        }
        #tips h3 {
            color: #2c3e50;
            margin-top: 0;
            font-size: 1.1rem;
        }
        #tips ul {
            padding-left: 20px;
            margin: 10px 0;
        }
        #tips li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        .device-hint {
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 5px;
        }
        .cefr-details {
            background-color: #f0f0f0;
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>å­¦éœ¸æ•™è‚² - è‹±æ–‡ä¼šè¯ç³»ç»Ÿ</h2>
        
        <label for="difficulty">é€‰æ‹©éš¾åº¦ï¼š</label>
        <select id="difficulty">
            <option value="easy">åˆçº§ (A1-A2)</option>
            <option value="medium">ä¸­çº§ (B1-B2)</option>
            <option value="hard">é«˜çº§ (C1-C2)</option>
        </select>
        <button id="generateBtn">ç”Ÿæˆä¸»é¢˜</button>

        <h3>ä¼šè¯ä¸»é¢˜ï¼š</h3>
        <div id="topic">ï¼ˆè¯·ç‚¹å‡»æŒ‰é’®ç”Ÿæˆä¸»é¢˜ï¼‰</div>

        <button id="recordBtn" disabled>ğŸ¤ å¼€å§‹å½•éŸ³</button>
        <p class="device-hint" id="deviceHint"></p>
        <button id="stopBtn" disabled>â¹ åœæ­¢å½•éŸ³</button>

        <h3>æ‚¨çš„å›ç­”ï¼š</h3>
        <div id="output">ï¼ˆå½•éŸ³åä¼šæ˜¾ç¤ºæ‚¨çš„å›ç­”ï¼‰</div>
        <div id="result"></div>
        <div id="status">å‡†å¤‡å°±ç»ª</div>
        <div id="error"></div>

        <button id="evaluateBtn" disabled>è¯„ä¼°å›ç­”</button>
        <h3>è¯„ä¼°ç»“æœï¼š</h3>
        <div id="score">ï¼ˆç‚¹å‡»è¯„ä¼°åæŸ¥çœ‹åˆ†æ•°ï¼‰</div>
        <div id="feedback"></div>

        <div id="tips">
            <h3>ğŸ’¡ å®ç”¨è‹±æ–‡è¡¨è¾¾æŠ€å·§</h3>
            <p><strong>ä¸‡èƒ½å¥å¼ (é€‚ç”¨äºæ‰€æœ‰è¯é¢˜):</strong></p>
            <ul>
                <li><strong>å¼€å¤´è¡¨è¾¾:</strong> "Well, I think that..." / "In my opinion..."</li>
                <li><strong>è¿‡æ¸¡è¿æ¥:</strong> "On the one hand... on the other hand..."</li>
                <li><strong>ä¸¾ä¾‹è¯´æ˜:</strong> "For example..." / "A good example is..."</li>
                <li><strong>è¡¨è¾¾ä¸ç¡®å®š:</strong> "I'm not sure but..."</li>
                <li><strong>æ€»ç»“é™ˆè¿°:</strong> "In conclusion..."</li>
            </ul>
            <div class="cefr-details">
                <strong>CEFRè¯„åˆ†æ ‡å‡†:</strong>
                <ul>
                    <li><strong>A1-A2:</strong> åŸºç¡€æ—¥å¸¸äº¤æµèƒ½åŠ›</li>
                    <li><strong>B1-B2:</strong> ç‹¬ç«‹è¡¨è¾¾è§‚ç‚¹èƒ½åŠ›</li>
                    <li><strong>C1-C2:</strong> æµåˆ©ä¸“ä¸šè¡¨è¾¾èƒ½åŠ›</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // è·å–æ‰€æœ‰DOMå…ƒç´ 
            const generateBtn = document.getElementById('generateBtn');
            const recordBtn = document.getElementById('recordBtn');
            const stopBtn = document.getElementById('stopBtn');
            const evaluateBtn = document.getElementById('evaluateBtn');
            const difficultySelect = document.getElementById('difficulty');
            const topicDisplay = document.getElementById('topic');
            const outputDisplay = document.getElementById('output');
            const resultDisplay = document.getElementById('result');
            const statusDisplay = document.getElementById('status');
            const scoreDisplay = document.getElementById('score');
            const feedbackDisplay = document.getElementById('feedback');
            const errorDisplay = document.getElementById('error');
            const deviceHint = document.getElementById('deviceHint');
            
            // ç³»ç»Ÿå˜é‡
            let recognition;
            let isRecording = false;
            let userResponse = "";
            let currentTopic = "";
            let currentDifficulty = "";
            
            // è®¾å¤‡æ£€æµ‹
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            const isAndroid = /Android/i.test(navigator.userAgent);
            const isMobile = isIOS || isAndroid;
            const isChrome = /Chrome/.test(navigator.userAgent);
            const isSafari = /Safari/.test(navigator.userAgent) && !isChrome;
            
            // è®¾ç½®è®¾å¤‡æç¤º
            if(isIOS) {
                deviceHint.innerHTML = 'iPhoneç”¨æˆ·æç¤º: <br>1. é¦–æ¬¡ä½¿ç”¨éœ€åœ¨å¼¹å‡ºçª—å£ä¸­å…è®¸éº¦å…‹é£æƒé™<br>2. è¯´è¯æ—¶é è¿‘åº•éƒ¨éº¦å…‹é£<br>3. å¦‚æœæ— æ³•ä½¿ç”¨ï¼Œè¯·å°è¯•é‡å¯Safari';
            } else if(isAndroid) {
                deviceHint.textContent = 'å®‰å“ç”¨æˆ·è¯·ä½¿ç”¨Chromeæµè§ˆå™¨ï¼Œå¹¶ç¡®ä¿å·²å…è®¸éº¦å…‹é£æƒé™';
            } else if(isMobile) {
                deviceHint.textContent = 'æ‰‹æœºç”¨æˆ·è¯·ç¡®ä¿å·²å…è®¸éº¦å…‹é£æƒé™ï¼Œå¹¶åœ¨å®‰é™ç¯å¢ƒä¸­ä½¿ç”¨';
            } else {
                deviceHint.textContent = 'ç”µè„‘ç”¨æˆ·è¯·ä½¿ç”¨Chrome/Edgeæµè§ˆå™¨ï¼Œå¹¶è¿æ¥éº¦å…‹é£';
            }
            
            // ä¸»é¢˜æ•°æ®åº“
            const topics = {
                easy: [
                    "è‡ªæˆ‘ä»‹ç» (Introduce yourself)",
                    "ä½ çš„å…´è¶£çˆ±å¥½ (Your hobbies)",
                    "æœ€å–œæ¬¢çš„é£Ÿç‰© (Favorite food)",
                    "æè¿°ä½ çš„å®¶äºº (Describe your family)",
                    "æ˜¨å¤©åšäº†ä»€ä¹ˆ (What you did yesterday)"
                ],
                medium: [
                    "ä¸€æ¬¡éš¾å¿˜çš„æ—…è¡Œ (A memorable trip)",
                    "å¦‚ä½•åº¦è¿‡å‘¨æœ« (How you spend weekends)",
                    "æœ€å–œæ¬¢çš„ç”µå½± (Favorite movie)",
                    "é‡è¦çš„å…¨çƒé—®é¢˜ (Important global issue)",
                    "ä½ çš„ç†æƒ³å·¥ä½œ (Your ideal job)"
                ],
                hard: [
                    "ç§‘æŠ€å¯¹ç”Ÿæ´»çš„å½±å“ (Technology's impact)",
                    "ç¯å¢ƒä¿æŠ¤çš„é‡è¦æ€§ (Environmental protection)",
                    "äººå·¥æ™ºèƒ½çš„å½±å“ (AI's impact on society)",
                    "å…¨çƒåŒ–å¯¹æ–‡åŒ–çš„å½±å“ (Globalization's effects)",
                    "æ•™è‚²ç³»ç»Ÿæ”¹é© (Education system reform)"
                ]
            };
            
            // CEFRè¯„ä¼°æ ‡å‡†
            const cefrCriteria = {
                A1: { min: 60, max: 70, desc: "èƒ½ä½¿ç”¨ç®€å•çš„çŸ­è¯­å’Œå¥å­æè¿°ç†Ÿæ‚‰çš„è¯é¢˜" },
                A2: { min: 71, max: 80, desc: "èƒ½å°±ç†Ÿæ‚‰è¯é¢˜è¿›è¡ŒåŸºæœ¬äº¤æµ" },
                B1: { min: 81, max: 87, desc: "èƒ½å°±ç†Ÿæ‚‰è¯é¢˜è¿›è¡Œè¿è´¯è¡¨è¾¾" },
                B2: { min: 88, max: 93, desc: "èƒ½å°±å¹¿æ³›è¯é¢˜è¿›è¡Œæ¸…æ™°è¯¦ç»†è¡¨è¾¾" },
                C1: { min: 94, max: 98, desc: "èƒ½æµåˆ©è‡ªç„¶åœ°è¡¨è¾¾å¤æ‚æ€æƒ³" },
                C2: { min: 99, max: 100, desc: "èƒ½ç²¾ç¡®åŒºåˆ†ç»†å¾®æ„ä¹‰å·®åˆ«" }
            };
            
            // æ£€æŸ¥è¯­éŸ³è¯†åˆ«æ”¯æŒ
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (!SpeechRecognition) {
                showError("æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«ï¼Œè¯·ä½¿ç”¨Chrome/Edge/Safari(14+)");
                disableAllButtons();
                generateBtn.disabled = false;
                return;
            }
            
            // äº‹ä»¶ç›‘å¬å™¨
            generateBtn.addEventListener('click', generateTopic);
            recordBtn.addEventListener('click', startRecording);
            stopBtn.addEventListener('click', stopRecording);
            evaluateBtn.addEventListener('click', evaluateSpeech);
            
            // ç”Ÿæˆä¸»é¢˜å‡½æ•°
            function generateTopic() {
                currentDifficulty = difficultySelect.value;
                const topicList = topics[currentDifficulty];
                currentTopic = topicList[Math.floor(Math.random() * topicList.length)];
                topicDisplay.textContent = currentTopic;
                recordBtn.disabled = false;
                evaluateBtn.disabled = true;
                userResponse = "";
                outputDisplay.textContent = "ï¼ˆå½•éŸ³åä¼šæ˜¾ç¤ºæ‚¨çš„å›ç­”ï¼‰";
                resultDisplay.textContent = "";
                statusDisplay.textContent = "å‡†å¤‡å°±ç»ª";
                scoreDisplay.textContent = "ï¼ˆç‚¹å‡»è¯„ä¼°åæŸ¥çœ‹åˆ†æ•°ï¼‰";
                feedbackDisplay.textContent = "";
                errorDisplay.textContent = "";
            }
            
            // å¼€å§‹å½•éŸ³å‡½æ•° (è·¨è®¾å¤‡å…¼å®¹ç‰ˆ)
            function startRecording() {
                if (!currentTopic) {
                    showError("è¯·å…ˆç”Ÿæˆä¸»é¢˜ï¼");
                    return;
                }
                
                statusDisplay.textContent = "æ­£åœ¨è¯·æ±‚éº¦å…‹é£æƒé™...";
                errorDisplay.textContent = "";
                
                // ç»Ÿä¸€å¤„ç†éº¦å…‹é£æƒé™
                navigator.mediaDevices.getUserMedia({ audio: true })
                    .then(stream => {
                        // ç«‹å³åœæ­¢æµä»¥é˜²æ­¢å½•éŸ³å†²çª
                        stream.getTracks().forEach(track => track.stop());
                        initSpeechRecognition();
                    })
                    .catch(err => {
                        let errorMsg = 'éº¦å…‹é£ä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥è®¾å¤‡';
                        
                        if (err.name === 'NotAllowedError') {
                            errorMsg = 'éº¦å…‹é£è®¿é—®è¢«æ‹’ç»ï¼Œè¯·å…è®¸æƒé™';
                            if (isIOS) errorMsg += '<br>(è®¾ç½® > Safari > éº¦å…‹é£)';
                            else if (isAndroid) errorMsg += '<br>(Chromeè®¾ç½® > ç½‘ç«™è®¾ç½® > éº¦å…‹é£)';
                        } else if (err.name === 'NotFoundError') {
                            errorMsg = 'æ‰¾ä¸åˆ°éº¦å…‹é£è®¾å¤‡';
                        } else if (err.name === 'NotReadableError') {
                            errorMsg = 'éº¦å…‹é£è¢«å…¶ä»–åº”ç”¨å ç”¨';
                        }
                        
                        showError(errorMsg);
                        recordBtn.disabled = false;
                    });
            }
            
            // åˆå§‹åŒ–è¯­éŸ³è¯†åˆ«
            function initSpeechRecognition() {
                recognition = new SpeechRecognition();
                recognition.lang = 'en-US';
                recognition.interimResults = false;
                recognition.maxAlternatives = 1;
                
                // iOSç‰¹æ®Šè®¾ç½®
                if(isIOS) {
                    recognition.continuous = false; // iOSå¿…é¡»è®¾ä¸ºfalse
                } else {
                    recognition.continuous = true; // å…¶ä»–å¹³å°è®¾ä¸ºtrueä»¥è·å¾—æ›´å¥½ä½“éªŒ
                }
                
                recognition.onstart = function() {
                    isRecording = true;
                    statusDisplay.textContent = "ğŸ”´ æ­£åœ¨å½•éŸ³...è¯·è¯´è¯";
                    outputDisplay.textContent = "æ­£åœ¨è†å¬...";
                    recordBtn.disabled = true;
                    stopBtn.disabled = false;
                    recordBtn.classList.add("recording");
                };
                
                recognition.onresult = function(event) {
                    const transcript = event.results[event.results.length - 1][0].transcript;
                    if (transcript.trim().length > 0) {
                        userResponse = transcript;
                        outputDisplay.textContent = userResponse;
                        resultDisplay.innerHTML = `<strong>è¯†åˆ«ç»“æœï¼š</strong>${userResponse}`;
                        statusDisplay.textContent = "âœ“ å½•éŸ³æˆåŠŸ";
                        evaluateBtn.disabled = false;
                    }
                };
                
                recognition.onerror = function(event) {
                    handleRecognitionError(event.error);
                };
                
                recognition.onend = function() {
                    if(isRecording) {
                        // è‡ªåŠ¨é‡æ–°å¯åŠ¨å½•éŸ³ï¼ˆéiOSè®¾å¤‡ï¼‰
                        if(!isIOS && recognition && isRecording) {
                            try {
                                recognition.start();
                            } catch(e) {
                                stopRecording();
                            }
                        } else {
                            stopRecording();
                        }
                    }
                };
                
                try {
                    recognition.start();
                } catch(err) {
                    showError("æ— æ³•å¯åŠ¨è¯­éŸ³è¯†åˆ«: " + err.message);
                    stopRecording();
                }
            }
            
            // åœæ­¢å½•éŸ³å‡½æ•°
            function stopRecording() {
                if (isRecording && recognition) {
                    try {
                        recognition.stop();
                    } catch(e) {
                        console.log("Error stopping recognition:", e);
                    }
                }
                isRecording = false;
                recordBtn.disabled = false;
                stopBtn.disabled = true;
                recordBtn.classList.remove("recording");
                
                if(!userResponse) {
                    statusDisplay.textContent = "âš ï¸ æœªæ£€æµ‹åˆ°è¯­éŸ³ï¼Œè¯·é‡è¯•";
                }
            }
            
            // è¯„ä¼°å‡½æ•°
            function evaluateSpeech() {
                if (!userResponse) {
                    showError("æœªæ£€æµ‹åˆ°è¯­éŸ³ï¼Œè¯·é‡è¯•");
                    return;
                }
                
                // åˆ†æå›ç­”ç‰¹å¾
                const wordCount = userResponse.split(/\s+/).length;
                const uniqueWords = new Set(userResponse.toLowerCase().match(/\b[a-z]+\b/g) || []).size;
                const vocabRatio = uniqueWords / Math.max(1, wordCount);
                const sentenceCount = (userResponse.match(/[.!?]+/g) || []).length;
                const complexStructures = (userResponse.match(/because|although|however|therefore|which|that/g) || []).length;
                
                // åŸºç¡€åˆ†æ•°è®¡ç®—
                let score = 60; // åŸºç¡€åˆ†
                score += Math.min(20, wordCount * 0.4); // é•¿åº¦åˆ†
                score += vocabRatio * 15; // è¯æ±‡å¤šæ ·æ€§
                score += complexStructures * 3; // å¥å­å¤æ‚åº¦
                
                // æ ¹æ®éš¾åº¦è°ƒæ•´
                if (currentDifficulty === "medium") score += 5;
                if (currentDifficulty === "hard") score += 10;
                
                // æœ€ç»ˆåˆ†æ•°å¤„ç†
                score = Math.max(60, Math.min(100, Math.round(score)));
                
                // ç¡®å®šCEFRçº§åˆ«
                let cefrLevel = "";
                for (const [level, criteria] of Object.entries(cefrCriteria)) {
                    if (score >= criteria.min && score <= criteria.max) {
                        cefrLevel = level;
                        break;
                    }
                }
                
                // æ˜¾ç¤ºç»“æœ
                scoreDisplay.innerHTML = `
                    <strong>CEFRç­‰çº§:</strong> ${cefrLevel}<br>
                    <strong>å¾—åˆ†:</strong> ${score}/100<br>
                    <div class="cefr-details">${cefrCriteria[cefrLevel].desc}</div>
                `;
                
                // ç”Ÿæˆåé¦ˆ
                feedbackDisplay.innerHTML = generateFeedback(cefrLevel, wordCount, vocabRatio, complexStructures);
            }
            
            // ç”Ÿæˆåé¦ˆå†…å®¹
            function generateFeedback(cefrLevel, wordCount, vocabRatio, complexStructures) {
                let feedback = `<p><strong>${cefrCriteria[cefrLevel].desc}</strong></p>`;
                
                feedback += "<p><strong>è¯¦ç»†åˆ†æ:</strong></p><ul>";
                feedback += `<li>å›ç­”é•¿åº¦: ${wordCount} ä¸ªå•è¯</li>`;
                feedback += `<li>è¯æ±‡å¤šæ ·æ€§: ${Math.round(vocabRatio * 100)}%</li>`;
                feedback += `<li>å¤æ‚ç»“æ„: ${complexStructures} å¤„</li>`;
                feedback += `<li>éš¾åº¦çº§åˆ«: ${currentDifficulty}</li>`;
                feedback += "</ul>";
                
                feedback += "<p><strong>å­¦ä¹ å»ºè®®:</strong></p><ul>";
                
                if (cefrLevel === "A1" || cefrLevel === "A2") {
                    feedback += `
                        <li>æ¯å¤©å­¦ä¹ 10ä¸ªæ–°å•è¯å¹¶é€ å¥</li>
                        <li>ç»ƒä¹ åŸºç¡€å¥å‹: "I like...", "My favorite... is..."</li>
                        <li>å¬ç®€å•è‹±è¯­å¯¹è¯å¹¶è·Ÿè¯»</li>
                    `;
                } else if (cefrLevel === "B1" || cefrLevel === "B2") {
                    feedback += `
                        <li>é˜…è¯»é€‚åˆæ‚¨æ°´å¹³çš„è‹±æ–‡æ–‡ç« </li>
                        <li>ç»ƒä¹ ä½¿ç”¨è¿æ¥è¯: however, therefore, although</li>
                        <li>å½•åˆ¶2åˆ†é’Ÿè‡ªæˆ‘ä»‹ç»å¹¶åˆ†ææ”¹è¿›</li>
                    `;
                } else {
                    feedback += `
                        <li>è§‚çœ‹TEDæ¼”è®²å¹¶æ¨¡ä»¿æ¼”è®²è€…</li>
                        <li>ç»ƒä¹ è¡¨è¾¾å¤æ‚è§‚ç‚¹å’ŒæŠ½è±¡æ¦‚å¿µ</li>
                        <li>å­¦ä¹ åŒä¹‰è¯æ›¿æ¢ä¸°å¯Œè¡¨è¾¾</li>
                    `;
                }
                
                feedback += "</ul>";
                return feedback;
            }
            
            // é”™è¯¯å¤„ç†å‡½æ•°
            function handleRecognitionError(error) {
                const errorMap = {
                    'no-speech': 'æœªæ£€æµ‹åˆ°è¯­éŸ³ï¼Œè¯·é‡è¯•',
                    'audio-capture': 'éº¦å…‹é£ä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥è®¾å¤‡',
                    'not-allowed': 'éº¦å…‹é£è®¿é—®è¢«æ‹’ç»' + (isIOS ? ' (è®¾ç½® > Safari > éº¦å…‹é£)' : ''),
                    'aborted': 'è¯­éŸ³è¯†åˆ«è¢«ä¸­æ­¢',
                    'network': 'ç½‘ç»œé—®é¢˜å¯¼è‡´è¯†åˆ«å¤±è´¥',
                    'language-not-supported': 'ä¸æ”¯æŒè‹±è¯­è¯†åˆ«',
                    'service-not-allowed': 'è¯­éŸ³è¯†åˆ«æœåŠ¡ä¸å¯ç”¨',
                    'bad-grammar': 'è¯­æ³•é”™è¯¯',
                    'default': 'è¯†åˆ«é”™è¯¯: ' + error
                };
                
                const message = errorMap[error] || errorMap['default'];
                showError(message);
                stopRecording();
            }
            
            // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
            function showError(message) {
                errorDisplay.innerHTML = "âŒ " + message;
            }
            
            // ç¦ç”¨æ‰€æœ‰æŒ‰é’®
            function disableAllButtons() {
                generateBtn.disabled = true;
                recordBtn.disabled = true;
                stopBtn.disabled = true;
                evaluateBtn.disabled = true;
            }
            
            // åˆå§‹æŒ‰é’®çŠ¶æ€
            recordBtn.disabled = true;
            stopBtn.disabled = true;
            evaluateBtn.disabled = true;
        });
    </script>
</body>
</html>